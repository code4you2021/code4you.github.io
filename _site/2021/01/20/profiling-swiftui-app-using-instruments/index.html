<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="swift ios development apple watch iphone ipad swiftui macos uikit dev wwdc tutorial guide redux tea state container" />

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Profiling SwiftUI app using Instruments | Code4You</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Profiling SwiftUI app using Instruments" />
<meta name="author" content="Code4You" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Xcode comes with a bunch of tools you need to build, debug and release your apps. One of these tools is the Instruments app. The Instruments app is a great tool for profiling your iOS apps. It provides many profiling templates for debugging Core Data, catching memory leaks, disk read/writes, and much more. This week we will learn how to profile SwiftUI apps using the SwiftUI template." />
<meta property="og:description" content="Xcode comes with a bunch of tools you need to build, debug and release your apps. One of these tools is the Instruments app. The Instruments app is a great tool for profiling your iOS apps. It provides many profiling templates for debugging Core Data, catching memory leaks, disk read/writes, and much more. This week we will learn how to profile SwiftUI apps using the SwiftUI template." />
<link rel="canonical" href="http://localhost:4000/2021/01/20/profiling-swiftui-app-using-instruments/" />
<meta property="og:url" content="http://localhost:4000/2021/01/20/profiling-swiftui-app-using-instruments/" />
<meta property="og:site_name" content="Code4You" />
<meta property="og:image" content="http://localhost:4000/public/profile2.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-01-20T00:00:00+08:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://localhost:4000/public/profile2.png" />
<meta property="twitter:title" content="Profiling SwiftUI app using Instruments" />
<script type="application/ld+json">
{"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2021/01/20/profiling-swiftui-app-using-instruments/"},"url":"http://localhost:4000/2021/01/20/profiling-swiftui-app-using-instruments/","image":"http://localhost:4000/public/profile2.png","author":{"@type":"Person","name":"Code4You"},"headline":"Profiling SwiftUI app using Instruments","description":"Xcode comes with a bunch of tools you need to build, debug and release your apps. One of these tools is the Instruments app. The Instruments app is a great tool for profiling your iOS apps. It provides many profiling templates for debugging Core Data, catching memory leaks, disk read/writes, and much more. This week we will learn how to profile SwiftUI apps using the SwiftUI template.","dateModified":"2021-01-20T00:00:00+08:00","datePublished":"2021-01-20T00:00:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <link rel="stylesheet" href="/styles.css">
  <link rel="shortcut icon" href="/public/favicon.ico">
  <link rel="alternate" type="application/atom+xml" title="Code4You" href="/feed.xml">
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <nav>
          <h1 class="masthead-title">
            <a href="/" title="Home">Code4You</a>
          </h1>
          <div>
            <a href="/categories" title="Categories">Categories</a>
            <a href="/archive" title="Archive">Archive</a>
            <a href="/feed.xml" title="Feed">Feed</a>
          </div>
        </nav>
      </header>

      <main>
        <article class="post">
  <h2 class="post-title">Profiling SwiftUI app using Instruments</h2>
  <time datetime="2021-01-20T00:00:00+08:00" class="post-date">20 Jan 2021</time>
  <p>Xcode comes with a bunch of tools you need to build, debug and release your apps. One of these tools is the Instruments app. The Instruments app is a great tool for profiling your iOS apps. It provides many profiling templates for debugging Core Data, catching memory leaks, disk read/writes, and much more. This week we will learn how to profile SwiftUI apps using the SwiftUI template.</p>

<!-- <div class="ads">
    <span>
        Why don’t more iOS apps use voice? Machine learning for voice is hard, and using Siri is clunky and rigid. So we open-sourced an iOS library (also Android, Node, Python, & React Native), and built a no-code web tool to make custom wake words, speech recognizers, and AI voices—for all devs! <a href="https://www.spokestack.io/?utm_source=swiftui_weekly&utm_medium=email&utm_campaign=maker_launch_PAID">Try it for free.</a>
    </span>
</div> -->

<p>Many developers profile apps only when they have some issues. That’s why Instruments looks like the hidden gem of Xcode. I suggest you profile your apps on a weekly or bi-weekly basis. Profiling your app by making incremental changes is the best way to identify and fix small performance downgrades.</p>

<p><img src="/public/profile1.png" alt="instruments" /></p>

<p>First of all, you need to build the app in profiling mode by selecting <em>Product -&gt; Profile</em> or pressing <em>CMD+I</em>. Remember that you should profile your app only on the real device and not the simulator. Then you can select the SwiftUI template in the newly opened Instruments window and press the record button.</p>

<p><img src="/public/profile2.png" alt="instruments" /></p>

<p>SwiftUI profiling template is divided into four main sections: View Body, View Properties, Core Animation Commits, Time Profiler. By understanding the values in these sections, you can investigate the issues that your app might have.</p>

<h4 id="view-body">View Body</h4>
<p>The first section you see is View Body. As you already know, SwiftUI calls the body property of your views to understand changes in the view hierarchy and render them. SwiftUI calls body property whenever view dependencies change. For example, when you change the value of the state or observed object.</p>

<p><img src="/public/profile3.png" alt="instruments" /></p>

<p>The most interesting value here is the Average Duration. You should keep your body properties as fast as possible. Don’t create heavy objects inside the body property. For example, try to avoid creating <em>DateFormatter</em> inside the body property.</p>

<blockquote>
  <p>To learn more about the diffing process that SwiftUI applies, take a look at my <a href="/2019/11/19/you-have-to-change-mindset-to-use-swiftui/">“You have to change mindset to use SwiftUI”</a> post.</p>
</blockquote>

<p>Remember that iOS uses 16ms frames to render your app. On devices with ProMotion display iOS uses even shorter 8ms frames. SwiftUI runs the body property whenever you change view dependencies, diff it with the previous version, and commit the Core Animation transaction. You should keep the whole process inside the 8ms time frame. In other cases, you will have a glitch.</p>

<h4 id="view-properties">View Properties</h4>
<p>In the View Properties section, you can find every changed view property. You should expect to have view property updates more often than body property calls because SwiftUI merge multiple property updates to run a single body update.</p>

<p>Here you can check the values of changed properties and find the properties which update more often than you need or expect.</p>

<p><img src="/public/profile4.png" alt="instruments" /></p>

<h4 id="time-profiler">Time Profiler</h4>
<p>In the Time Profiler section, you can find the timing for every function in your app. You can see the heaviest stack trace on the right, and usually, this is all you need to solve a performance issue. The filters pane on the bottom is where you can hide system libraries by pressing the Call Tree button.</p>

<p><img src="/public/profile5.png" alt="instruments" /></p>

<blockquote>
  <p>To learn more about other templates available in Instruments app, take a look at <a href="https://www.raywenderlich.com/16126261-instruments-tutorial-with-swift-getting-started">“Instruments Tutorial with Swift: Getting Started”</a>.</p>
</blockquote>

<h4 id="conclusion">Conclusion</h4>
<p>Today we have learned how to use Instruments app and its SwiftUI template to profile our apps. I hope you enjoy the post. Feel free to follow me on <a href="https://twitter.com/mecid">Twitter</a> and ask your questions related to this article. Thanks for reading, and see you next week!</p>

</article>


<aside class="related">
  <h4>Recent posts</h4>
  <ul class="related-posts">
    
      <li>
        <a title="Custom accessibility content in SwiftUI" href="/2021/10/06/custom-accessibility-content-in-swiftui/">
          Custom accessibility content in SwiftUI
          <small><time datetime="2021-10-06T00:00:00+08:00">06 Oct 2021</time></small>
        </a>
      </li>
    
      <li>
        <a title="Audio graphs in SwiftUI" href="/2021/09/29/audio-graphs-in-swiftui/">
          Audio graphs in SwiftUI
          <small><time datetime="2021-09-29T00:00:00+08:00">29 Sep 2021</time></small>
        </a>
      </li>
    
      <li>
        <a title="Accessibility focus in SwiftUI" href="/2021/09/23/accessibility-focus-in-swiftui/">
          Accessibility focus in SwiftUI
          <small><time datetime="2021-09-23T00:00:00+08:00">23 Sep 2021</time></small>
        </a>
      </li>
    
  </ul>
</aside>


      </main>

      <footer class="footer">
          <img class="avatar" alt="mecid" width="100" height="100" data-proofer-ignore="true" src="https://avatars2.githubusercontent.com/mecid?v=3&s=100" srcset="https://avatars2.githubusercontent.com/mecid?v=3&s=100 1x, https://avatars2.githubusercontent.com/mecid?v=3&s=200 2x, https://avatars2.githubusercontent.com/mecid?v=3&s=300 3x, https://avatars2.githubusercontent.com/mecid?v=3&s=400 4x" />
          <small>Hi there! I am code4you,I like to program, and do some App.</small>
          <small>I'm a developer</small>
          <small>Feel free to follow me on <a href="https://github.com/code4you2021">Github</a>.</small>
        <small>
          &copy; <time datetime="2021-10-17T11:25:11+08:00">2021</time>. All rights reserved.
        </small>
      </footer>
    </div>

    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1WQVZK1CR7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-18491817-18');
    </script>
    
  </body>
</html>
