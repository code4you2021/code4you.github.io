<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="swift ios development apple watch iphone ipad swiftui macos uikit dev wwdc tutorial guide redux tea state container" />

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Custom accessibility content in SwiftUI | Code4You</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Custom accessibility content in SwiftUI" />
<meta name="author" content="Code4You" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="SwiftUI Release 3 brought a lot of new accessibility APIs, which we can use to improve user experience drastically in an effortless way. This week I want to talk about another new API that allows us to provide customized accessibility content using the new accessibilityCustomContent view modifier in SwiftUI." />
<meta property="og:description" content="SwiftUI Release 3 brought a lot of new accessibility APIs, which we can use to improve user experience drastically in an effortless way. This week I want to talk about another new API that allows us to provide customized accessibility content using the new accessibilityCustomContent view modifier in SwiftUI." />
<link rel="canonical" href="http://localhost:4000/2021/10/06/custom-accessibility-content-in-swiftui/" />
<meta property="og:url" content="http://localhost:4000/2021/10/06/custom-accessibility-content-in-swiftui/" />
<meta property="og:site_name" content="Code4You" />
<meta property="og:image" content="http://localhost:4000/public/accessibility.jpeg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-10-06T00:00:00+08:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://localhost:4000/public/accessibility.jpeg" />
<meta property="twitter:title" content="Custom accessibility content in SwiftUI" />
<script type="application/ld+json">
{"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2021/10/06/custom-accessibility-content-in-swiftui/"},"url":"http://localhost:4000/2021/10/06/custom-accessibility-content-in-swiftui/","image":"http://localhost:4000/public/accessibility.jpeg","author":{"@type":"Person","name":"Code4You"},"headline":"Custom accessibility content in SwiftUI","description":"SwiftUI Release 3 brought a lot of new accessibility APIs, which we can use to improve user experience drastically in an effortless way. This week I want to talk about another new API that allows us to provide customized accessibility content using the new accessibilityCustomContent view modifier in SwiftUI.","dateModified":"2021-10-06T00:00:00+08:00","datePublished":"2021-10-06T00:00:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <link rel="stylesheet" href="/styles.css">
  <link rel="shortcut icon" href="/public/favicon.ico">
  <link rel="alternate" type="application/atom+xml" title="Code4You" href="/feed.xml">
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <nav>
          <h1 class="masthead-title">
            <a href="/" title="Home">Code4You</a>
          </h1>
          <div>
            <a href="/categories" title="Categories">Categories</a>
            <a href="/archive" title="Archive">Archive</a>
            <a href="/feed.xml" title="Feed">Feed</a>
          </div>
        </nav>
      </header>

      <main>
        <article class="post">
  <h2 class="post-title">Custom accessibility content in SwiftUI</h2>
  <time datetime="2021-10-06T00:00:00+08:00" class="post-date">06 Oct 2021</time>
  <p>SwiftUI Release 3 brought a lot of new accessibility APIs, which we can use to improve user experience drastically in an effortless way. This week I want to talk about another new API that allows us to provide customized accessibility content using the new <em>accessibilityCustomContent</em> view modifier in SwiftUI.</p>

<p>Let’s start with a simple example that defines the <em>User</em> struct and a view presenting an instance of the <em>User</em> struct.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>

<span class="kd">struct</span> <span class="kt">User</span><span class="p">:</span> <span class="kt">Decodable</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">email</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">address</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">age</span><span class="p">:</span> <span class="kt">Int</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">UserView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">user</span><span class="p">:</span> <span class="kt">User</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">leading</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">subheadline</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="o">.</span><span class="n">secondary</span><span class="p">)</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="o">.</span><span class="n">secondary</span><span class="p">)</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"Age: </span><span class="se">\(</span><span class="n">user</span><span class="o">.</span><span class="n">age</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="o">.</span><span class="n">secondary</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>SwiftUI provides us with excellent accessibility support out of the box. You don’t need to do anything to make your <em>UserView</em> accessible. Every piece of text inside the <em>UserView</em> is accessible for assistive technologies like VoiceOver and Switch Control. It might sound good, but it can overwhelm VoiceOver users with a lot of data. Let’s improve accessibility support a little bit but adding a few accessibility modifiers to our <em>UserView</em>.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">UserView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">user</span><span class="p">:</span> <span class="kt">User</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">leading</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">subheadline</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="o">.</span><span class="n">secondary</span><span class="p">)</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="o">.</span><span class="n">secondary</span><span class="p">)</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"Age: </span><span class="se">\(</span><span class="n">user</span><span class="o">.</span><span class="n">age</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="o">.</span><span class="n">secondary</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">accessibilityElement</span><span class="p">(</span><span class="nv">children</span><span class="p">:</span> <span class="o">.</span><span class="n">ignore</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">accessibilityLabel</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>As you can see in the example above, we use accessibility modifiers to ignore the accessibility content of the children to make the stack itself an accessibility element. We also add the accessibility label to the stack but still miss the other parts. We want to make all the data accessible. Usually, we use different fonts and colors to prioritize text visually, but how can we achieve the same impact for assistive technologies?</p>

<blockquote>
  <p>To learn about the basics of accessibility in SwiftUI, take a look at my <a href="/2019/09/10/accessibility-in-swiftui/">“Accessibility in SwiftUI”</a> post.</p>
</blockquote>

<p>Fortunately, SwiftUI provides a way to generate customized accessibility content with different importance using the brand new <em>accessibilityCustomContent</em> view modifier. Let’s take a look at how we can use it.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">UserView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">user</span><span class="p">:</span> <span class="kt">User</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">leading</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">subheadline</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="o">.</span><span class="n">secondary</span><span class="p">)</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="o">.</span><span class="n">secondary</span><span class="p">)</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"Age: </span><span class="se">\(</span><span class="n">user</span><span class="o">.</span><span class="n">age</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="o">.</span><span class="n">secondary</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">accessibilityElement</span><span class="p">(</span><span class="nv">children</span><span class="p">:</span> <span class="o">.</span><span class="n">ignore</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">accessibilityLabel</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">accessibilityCustomContent</span><span class="p">(</span><span class="s">"Age"</span><span class="p">,</span> <span class="s">"</span><span class="se">\(</span><span class="n">user</span><span class="o">.</span><span class="n">age</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">accessibilityCustomContent</span><span class="p">(</span><span class="s">"Email"</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span> <span class="nv">importance</span><span class="p">:</span> <span class="o">.</span><span class="n">high</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">accessibilityCustomContent</span><span class="p">(</span><span class="s">"Address"</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="nv">importance</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Here we add a bunch of <em>accessibilityCustomContent</em> view modifiers to define custom accessibility content with various priorities. The <em>accessibilityCustomContent</em> view modifier has three parameters:</p>

<ol>
  <li>The first one is the localized label for your custom content that VoiceOver uses to announce.</li>
  <li>The second one is the localized label or string value presenting custom content.</li>
  <li>The third one is the importance level of your custom content. It can be <em>default</em> or <em>high</em>. VoiceOver reads content with high importance immediately, while the content with default importance is spoken only in verbose mode when the user uses vertical swipes to access more data.</li>
</ol>

<p>The <em>accessibilityCustomContent</em> view modifier allows us to prioritize data for assistive technologies. For example, VoiceOver reads the data with <em>high</em> importance immediately and enables the user to access data with <em>default</em> importance as needed using vertical swipes.</p>

<p>You can use as many <em>accessibilityCustomContent</em> view modifiers as needed to present a massive subset of your data. Remember that you can also replace and override data or importance by introducing <em>accessibilityCustomContent</em> view modifiers with the same label.</p>

<p>An excellent way to keep your custom accessibility content labels consistent across the large codebase is using the <em>AccessibilityCustomContentKey</em> type. You can use an instance of it as the first parameter of the <em>accessibilityCustomContent</em> view modifier.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">extension</span> <span class="kt">AccessibilityCustomContentKey</span> <span class="p">{</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">age</span> <span class="o">=</span> <span class="kt">AccessibilityCustomContentKey</span><span class="p">(</span><span class="s">"Age"</span><span class="p">)</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">email</span> <span class="o">=</span> <span class="kt">AccessibilityCustomContentKey</span><span class="p">(</span><span class="s">"Email"</span><span class="p">)</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">address</span> <span class="o">=</span> <span class="kt">AccessibilityCustomContentKey</span><span class="p">(</span><span class="s">"Address"</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">UserView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">user</span><span class="p">:</span> <span class="kt">User</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">VStack</span><span class="p">(</span><span class="nv">alignment</span><span class="p">:</span> <span class="o">.</span><span class="n">leading</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">headline</span><span class="p">)</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">font</span><span class="p">(</span><span class="o">.</span><span class="n">subheadline</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="o">.</span><span class="n">secondary</span><span class="p">)</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="o">.</span><span class="n">secondary</span><span class="p">)</span>
            <span class="kt">Text</span><span class="p">(</span><span class="s">"Age: </span><span class="se">\(</span><span class="n">user</span><span class="o">.</span><span class="n">age</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
                <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="o">.</span><span class="n">secondary</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">accessibilityElement</span><span class="p">(</span><span class="nv">children</span><span class="p">:</span> <span class="o">.</span><span class="n">ignore</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">accessibilityLabel</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">accessibilityCustomContent</span><span class="p">(</span><span class="o">.</span><span class="n">age</span><span class="p">,</span> <span class="s">"</span><span class="se">\(</span><span class="n">user</span><span class="o">.</span><span class="n">age</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">accessibilityCustomContent</span><span class="p">(</span><span class="o">.</span><span class="n">email</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span> <span class="nv">importance</span><span class="p">:</span> <span class="o">.</span><span class="n">high</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">accessibilityCustomContent</span><span class="p">(</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="nv">importance</span><span class="p">:</span> <span class="o">.</span><span class="k">default</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>In the example above, we define a few shortcuts for our custom accessibility content keys and use them in conjunction with the <em>accessibilityCustomContent</em> view modifier.</p>

<p>Today we learned how to use the <em>accessibilityCustomContent</em> view modifier to make our apps more accessible by prioritizing our data for assistive technologies and allowing user access as more details as needed. I hope you enjoy the post. Feel free to follow me on <a href="https://twitter.com/mecid">Twitter</a> and ask your questions related to this post. Thanks for reading, and see you next week!</p>

</article>


<aside class="related">
  <h4>Recent posts</h4>
  <ul class="related-posts">
    
      <li>
        <a title="Audio graphs in SwiftUI" href="/2021/09/29/audio-graphs-in-swiftui/">
          Audio graphs in SwiftUI
          <small><time datetime="2021-09-29T00:00:00+08:00">29 Sep 2021</time></small>
        </a>
      </li>
    
      <li>
        <a title="Accessibility focus in SwiftUI" href="/2021/09/23/accessibility-focus-in-swiftui/">
          Accessibility focus in SwiftUI
          <small><time datetime="2021-09-23T00:00:00+08:00">23 Sep 2021</time></small>
        </a>
      </li>
    
      <li>
        <a title="Accessibility rotors in SwiftUI" href="/2021/09/14/accessibility-rotors-in-swiftui/">
          Accessibility rotors in SwiftUI
          <small><time datetime="2021-09-14T00:00:00+08:00">14 Sep 2021</time></small>
        </a>
      </li>
    
  </ul>
</aside>


      </main>

      <footer class="footer">
          <img class="avatar" alt="mecid" width="100" height="100" data-proofer-ignore="true" src="https://avatars2.githubusercontent.com/mecid?v=3&s=100" srcset="https://avatars2.githubusercontent.com/mecid?v=3&s=100 1x, https://avatars2.githubusercontent.com/mecid?v=3&s=200 2x, https://avatars2.githubusercontent.com/mecid?v=3&s=300 3x, https://avatars2.githubusercontent.com/mecid?v=3&s=400 4x" />
          <small>Hi there! I am code4you,I like to program, and do some App.</small>
          <small>I'm a developer</small>
          <small>Feel free to follow me on <a href="https://github.com/code4you2021">Github</a>.</small>
        <small>
          &copy; <time datetime="2021-10-17T11:25:11+08:00">2021</time>. All rights reserved.
        </small>
      </footer>
    </div>

    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1WQVZK1CR7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-18491817-18');
    </script>
    
  </body>
</html>
