<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="swift ios development apple watch iphone ipad swiftui macos uikit dev wwdc tutorial guide redux tea state container" />

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Accessibility focus in SwiftUI | Code4You</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Accessibility focus in SwiftUI" />
<meta name="author" content="Code4You" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="One of the new features of SwiftUI Release 3 is accessibility focus management. SwiftUI allows us easily handle the focus state for assistive technologies like VoiceOver and Switch Control. This week we will learn how to use the AccessibilityFocusState property wrapper to move the accessibility focus in SwiftUI." />
<meta property="og:description" content="One of the new features of SwiftUI Release 3 is accessibility focus management. SwiftUI allows us easily handle the focus state for assistive technologies like VoiceOver and Switch Control. This week we will learn how to use the AccessibilityFocusState property wrapper to move the accessibility focus in SwiftUI." />
<link rel="canonical" href="http://localhost:4000/2021/09/23/accessibility-focus-in-swiftui/" />
<meta property="og:url" content="http://localhost:4000/2021/09/23/accessibility-focus-in-swiftui/" />
<meta property="og:site_name" content="Code4You" />
<meta property="og:image" content="http://localhost:4000/public/accessibility.jpeg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-09-23T00:00:00+08:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://localhost:4000/public/accessibility.jpeg" />
<meta property="twitter:title" content="Accessibility focus in SwiftUI" />
<script type="application/ld+json">
{"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2021/09/23/accessibility-focus-in-swiftui/"},"url":"http://localhost:4000/2021/09/23/accessibility-focus-in-swiftui/","image":"http://localhost:4000/public/accessibility.jpeg","author":{"@type":"Person","name":"Code4You"},"headline":"Accessibility focus in SwiftUI","description":"One of the new features of SwiftUI Release 3 is accessibility focus management. SwiftUI allows us easily handle the focus state for assistive technologies like VoiceOver and Switch Control. This week we will learn how to use the AccessibilityFocusState property wrapper to move the accessibility focus in SwiftUI.","dateModified":"2021-09-23T00:00:00+08:00","datePublished":"2021-09-23T00:00:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <link rel="stylesheet" href="/styles.css">
  <link rel="shortcut icon" href="/public/favicon.ico">
  <link rel="alternate" type="application/atom+xml" title="Code4You" href="/feed.xml">
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <nav>
          <h1 class="masthead-title">
            <a href="/" title="Home">Code4You</a>
          </h1>
          <div>
            <a href="/categories" title="Categories">Categories</a>
            <a href="/archive" title="Archive">Archive</a>
            <a href="/feed.xml" title="Feed">Feed</a>
          </div>
        </nav>
      </header>

      <main>
        <article class="post">
  <h2 class="post-title">Accessibility focus in SwiftUI</h2>
  <time datetime="2021-09-23T00:00:00+08:00" class="post-date">23 Sep 2021</time>
  <p>One of the new features of SwiftUI Release 3 is accessibility focus management. SwiftUI allows us easily handle the focus state for assistive technologies like VoiceOver and Switch Control. This week we will learn how to use the <em>AccessibilityFocusState</em> property wrapper to move the accessibility focus in SwiftUI.</p>

<p>SwiftUI Release 3 provides us a particular set of tools for managing accessibility focus. It includes the <em>AccessibilityFocusState</em> property wrapper and the <em>accessibilityFocused</em> view modifier. We can handle accessibility focus in a similar way that we manage it without assistive technologies.</p>

<blockquote>
  <p>To learn more about focus management in SwiftUI, take a look at my <a href="/2021/08/24/mastering-focusstate-property-wrapper-in-swiftui/">“Mastering FocusState property wrapper in SwiftUI”</a> post.</p>
</blockquote>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>

<span class="kd">struct</span> <span class="kt">SignInView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@AccessibilityFocusState</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">isEmailFocused</span><span class="p">:</span> <span class="kt">Bool</span>

    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">email</span> <span class="o">=</span> <span class="s">""</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">NavigationView</span> <span class="p">{</span>
            <span class="kt">Form</span> <span class="p">{</span>
                <span class="kt">TextField</span><span class="p">(</span><span class="s">"email"</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="err">$</span><span class="n">email</span><span class="p">,</span> <span class="nv">prompt</span><span class="p">:</span> <span class="kt">Text</span><span class="p">(</span><span class="s">"email"</span><span class="p">))</span>
                    <span class="o">.</span><span class="nf">accessibilityFocused</span><span class="p">(</span><span class="err">$</span><span class="n">isEmailFocused</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">navigationTitle</span><span class="p">(</span><span class="s">"Sign in"</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">onChange</span><span class="p">(</span><span class="nv">of</span><span class="p">:</span> <span class="n">isEmailFocused</span><span class="p">)</span> <span class="p">{</span> <span class="n">newValue</span> <span class="k">in</span>
                <span class="nf">print</span><span class="p">(</span><span class="n">newValue</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>As you can see in the example above, we use the <em>AccessibilityFocusState</em> property wrapper to define a variable that represents whenever the email field is focused. SwiftUI initializes the variable with the false value by default because the user can focus on any other area of the screen. We also use the <em>accessibilityFocused</em> view modifier to bind the focus state of a particular view to a variable holding its value.</p>

<p>Remember that you can declare as many variables as you need to cover your accessibility focus logic with the <em>AccessibilityFocusState</em> property wrapper.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>

<span class="kd">struct</span> <span class="kt">SignInView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@AccessibilityFocusState</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">isEmailFocused</span><span class="p">:</span> <span class="kt">Bool</span>
    
    <span class="kd">@AccessibilityFocusState</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">isPasswordFocused</span><span class="p">:</span> <span class="kt">Bool</span>

    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">email</span> <span class="o">=</span> <span class="s">""</span>
    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">password</span> <span class="o">=</span> <span class="s">""</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">NavigationView</span> <span class="p">{</span>
            <span class="kt">Form</span> <span class="p">{</span>
                <span class="kt">TextField</span><span class="p">(</span><span class="s">"email"</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="err">$</span><span class="n">email</span><span class="p">,</span> <span class="nv">prompt</span><span class="p">:</span> <span class="kt">Text</span><span class="p">(</span><span class="s">"email"</span><span class="p">))</span>
                    <span class="o">.</span><span class="nf">accessibilityFocused</span><span class="p">(</span><span class="err">$</span><span class="n">isEmailFocused</span><span class="p">)</span>
                <span class="kt">SecureField</span><span class="p">(</span><span class="s">"password"</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="err">$</span><span class="n">password</span><span class="p">,</span> <span class="nv">prompt</span><span class="p">:</span> <span class="kt">Text</span><span class="p">(</span><span class="s">"password"</span><span class="p">))</span>
                    <span class="o">.</span><span class="nf">accessibilityFocused</span><span class="p">(</span><span class="err">$</span><span class="n">isPasswordFocused</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">navigationTitle</span><span class="p">(</span><span class="s">"Sign in"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The nice thing about the <em>AccessibilityFocusState</em> property wrapper is that you can limit its behavior to a dedicated assistive technology. For example, you can activate the <em>AccessibilityFocusState</em> property wrapper only for VoiceOver or Switch Control. By default, SwiftUI aggregates the value for all assistive technologies available on the device.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>

<span class="kd">struct</span> <span class="kt">SignInView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@AccessibilityFocusState</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">switchControl</span><span class="p">)</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">isEmailFocused</span><span class="p">:</span> <span class="kt">Bool</span>

    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">email</span> <span class="o">=</span> <span class="s">""</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">NavigationView</span> <span class="p">{</span>
            <span class="kt">Form</span> <span class="p">{</span>
                <span class="kt">TextField</span><span class="p">(</span><span class="s">"email"</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="err">$</span><span class="n">email</span><span class="p">,</span> <span class="nv">prompt</span><span class="p">:</span> <span class="kt">Text</span><span class="p">(</span><span class="s">"email"</span><span class="p">))</span>
                    <span class="o">.</span><span class="nf">accessibilityFocused</span><span class="p">(</span><span class="err">$</span><span class="n">isEmailFocused</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">navigationTitle</span><span class="p">(</span><span class="s">"Sign in"</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">onChange</span><span class="p">(</span><span class="nv">of</span><span class="p">:</span> <span class="n">isEmailFocused</span><span class="p">)</span> <span class="p">{</span> <span class="n">newValue</span> <span class="k">in</span>
                <span class="nf">print</span><span class="p">(</span><span class="n">newValue</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Usually, you have more than one element on the screen, and you might want to move the focus between them. For this particular case, SwiftUI provides us a way to define our focusable fields via enum and switch between them.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">enum</span> <span class="kt">FocusableField</span><span class="p">:</span> <span class="kt">Hashable</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">email</span>
    <span class="k">case</span> <span class="n">password</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">ContentView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">email</span> <span class="o">=</span> <span class="s">""</span>
    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">password</span> <span class="o">=</span> <span class="s">""</span>
    
    <span class="kd">@AccessibilityFocusState</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">focus</span><span class="p">:</span> <span class="kt">FocusableField</span><span class="p">?</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">NavigationView</span> <span class="p">{</span>
            <span class="kt">Form</span> <span class="p">{</span>
                <span class="kt">TextField</span><span class="p">(</span><span class="s">"email"</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="err">$</span><span class="n">email</span><span class="p">,</span> <span class="nv">prompt</span><span class="p">:</span> <span class="kt">Text</span><span class="p">(</span><span class="s">"email"</span><span class="p">))</span>
                    <span class="o">.</span><span class="nf">accessibilityFocused</span><span class="p">(</span><span class="err">$</span><span class="n">focus</span><span class="p">,</span> <span class="nv">equals</span><span class="p">:</span> <span class="o">.</span><span class="n">email</span><span class="p">)</span>
                <span class="kt">SecureField</span><span class="p">(</span><span class="s">"password"</span><span class="p">,</span> <span class="nv">text</span><span class="p">:</span> <span class="err">$</span><span class="n">password</span><span class="p">,</span> <span class="nv">prompt</span><span class="p">:</span> <span class="kt">Text</span><span class="p">(</span><span class="s">"password"</span><span class="p">))</span>
                    <span class="o">.</span><span class="nf">accessibilityFocused</span><span class="p">(</span><span class="err">$</span><span class="n">focus</span><span class="p">,</span> <span class="nv">equals</span><span class="p">:</span> <span class="o">.</span><span class="n">password</span><span class="p">)</span>
                <span class="kt">Button</span><span class="p">(</span><span class="s">"login"</span><span class="p">,</span> <span class="nv">action</span><span class="p">:</span> <span class="n">login</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="n">toolbar</span> <span class="p">{</span>
                <span class="kt">ToolbarItem</span><span class="p">(</span><span class="nv">placement</span><span class="p">:</span> <span class="o">.</span><span class="n">keyboard</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kt">Button</span><span class="p">(</span><span class="s">"next"</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="n">email</span><span class="o">.</span><span class="n">isEmpty</span> <span class="p">{</span>
                            <span class="n">focus</span> <span class="o">=</span> <span class="o">.</span><span class="n">email</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">password</span><span class="o">.</span><span class="n">isEmpty</span> <span class="p">{</span>
                            <span class="n">focus</span> <span class="o">=</span> <span class="o">.</span><span class="n">password</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="n">focus</span> <span class="o">=</span> <span class="kc">nil</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="o">.</span><span class="nf">navigationTitle</span><span class="p">(</span><span class="s">"Sign in"</span><span class="p">)</span>
            <span class="o">.</span><span class="n">onAppear</span> <span class="p">{</span>
                <span class="kt">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="nf">asyncAfter</span><span class="p">(</span><span class="nv">deadline</span><span class="p">:</span> <span class="o">.</span><span class="nf">now</span><span class="p">()</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">focus</span> <span class="o">=</span> <span class="o">.</span><span class="n">email</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">private</span> <span class="kd">func</span> <span class="nf">login</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// your logic here</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>In the example above, we use the <em>AccessibilityFocusState</em> view modifier with our new <em>FocusableField</em> enum that defines all the focusable views on the screen. Keep in mind that you should make the <em>FocusableField</em> enum hashable and define an optional variable with the help of the <em>AccessibilityFocusState</em> view modifier to allow the framework to set the value to <strong>nil</strong> whenever the user moves the focus from the views you define.</p>

<p>We should also use another version of the <em>accessibilityFocused</em> view modifier to bind a view to a particular case of the hashable enum. Remember that you can programmatically move the focus of VoiceOver or Switch Control by changing the value of the variable wrapped with <em>AccessibilityFocusState</em>.</p>

<blockquote>
  <p>To learn about the basics of accessibility in SwiftUI, take a look at my <a href="/2019/09/10/accessibility-in-swiftui/">“Accessibility in SwiftUI”</a> post.</p>
</blockquote>

<p>I love SwiftUI because the different APIs use the same style and they are consistent across various features. You can learn it once and apply it in multiple places. This week we learned how to manage the accessibility focus which is very similar to the first responder management. I hope you enjoy the post. Feel free to follow me on <a href="https://twitter.com/mecid">Twitter</a> and ask your questions related to this post. Thanks for reading, and see you next week!</p>

</article>


<aside class="related">
  <h4>Recent posts</h4>
  <ul class="related-posts">
    
      <li>
        <a title="Custom accessibility content in SwiftUI" href="/2021/10/06/custom-accessibility-content-in-swiftui/">
          Custom accessibility content in SwiftUI
          <small><time datetime="2021-10-06T00:00:00+08:00">06 Oct 2021</time></small>
        </a>
      </li>
    
      <li>
        <a title="Audio graphs in SwiftUI" href="/2021/09/29/audio-graphs-in-swiftui/">
          Audio graphs in SwiftUI
          <small><time datetime="2021-09-29T00:00:00+08:00">29 Sep 2021</time></small>
        </a>
      </li>
    
      <li>
        <a title="Accessibility rotors in SwiftUI" href="/2021/09/14/accessibility-rotors-in-swiftui/">
          Accessibility rotors in SwiftUI
          <small><time datetime="2021-09-14T00:00:00+08:00">14 Sep 2021</time></small>
        </a>
      </li>
    
  </ul>
</aside>


      </main>

      <footer class="footer">
          <img class="avatar" alt="mecid" width="100" height="100" data-proofer-ignore="true" src="https://avatars2.githubusercontent.com/mecid?v=3&s=100" srcset="https://avatars2.githubusercontent.com/mecid?v=3&s=100 1x, https://avatars2.githubusercontent.com/mecid?v=3&s=200 2x, https://avatars2.githubusercontent.com/mecid?v=3&s=300 3x, https://avatars2.githubusercontent.com/mecid?v=3&s=400 4x" />
          <small>Hi there! I am code4you,I like to program, and do some App.</small>
          <small>I'm a developer</small>
          <small>Feel free to follow me on <a href="https://github.com/code4you2021">Github</a>.</small>
        <small>
          &copy; <time datetime="2021-10-17T11:25:11+08:00">2021</time>. All rights reserved.
        </small>
      </footer>
    </div>

    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1WQVZK1CR7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-18491817-18');
    </script>
    
  </body>
</html>
