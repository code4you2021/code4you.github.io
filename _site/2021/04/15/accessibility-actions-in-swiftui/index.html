<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="swift ios development apple watch iphone ipad swiftui macos uikit dev wwdc tutorial guide redux tea state container" />

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Accessibility actions in SwiftUI | Code4You</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Accessibility actions in SwiftUI" />
<meta name="author" content="Code4You" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="SwiftUI provides us accessible views out of the box, and usually, you don’t need to do anything to build an accessible app for your users. But there is always room for improvements and additional functionality that you can create using Accessibility API. This week we will learn how to provide custom accessibility actions for SwiftUI views." />
<meta property="og:description" content="SwiftUI provides us accessible views out of the box, and usually, you don’t need to do anything to build an accessible app for your users. But there is always room for improvements and additional functionality that you can create using Accessibility API. This week we will learn how to provide custom accessibility actions for SwiftUI views." />
<link rel="canonical" href="http://localhost:4000/2021/04/15/accessibility-actions-in-swiftui/" />
<meta property="og:url" content="http://localhost:4000/2021/04/15/accessibility-actions-in-swiftui/" />
<meta property="og:site_name" content="Code4You" />
<meta property="og:image" content="http://localhost:4000/public/accessibility.jpeg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-04-15T00:00:00+08:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://localhost:4000/public/accessibility.jpeg" />
<meta property="twitter:title" content="Accessibility actions in SwiftUI" />
<script type="application/ld+json">
{"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2021/04/15/accessibility-actions-in-swiftui/"},"url":"http://localhost:4000/2021/04/15/accessibility-actions-in-swiftui/","image":"http://localhost:4000/public/accessibility.jpeg","author":{"@type":"Person","name":"Code4You"},"headline":"Accessibility actions in SwiftUI","description":"SwiftUI provides us accessible views out of the box, and usually, you don’t need to do anything to build an accessible app for your users. But there is always room for improvements and additional functionality that you can create using Accessibility API. This week we will learn how to provide custom accessibility actions for SwiftUI views.","dateModified":"2021-04-15T00:00:00+08:00","datePublished":"2021-04-15T00:00:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <link rel="stylesheet" href="/styles.css">
  <link rel="shortcut icon" href="/public/favicon.ico">
  <link rel="alternate" type="application/atom+xml" title="Code4You" href="/feed.xml">
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <nav>
          <h1 class="masthead-title">
            <a href="/" title="Home">Code4You</a>
          </h1>
          <div>
            <a href="/categories" title="Categories">Categories</a>
            <a href="/archive" title="Archive">Archive</a>
            <a href="/feed.xml" title="Feed">Feed</a>
          </div>
        </nav>
      </header>

      <main>
        <article class="post">
  <h2 class="post-title">Accessibility actions in SwiftUI</h2>
  <time datetime="2021-04-15T00:00:00+08:00" class="post-date">15 Apr 2021</time>
  <p>SwiftUI provides us accessible views out of the box, and usually, you don’t need to do anything to build an accessible app for your users. But there is always room for improvements and additional functionality that you can create using Accessibility API. This week we will learn how to provide custom accessibility actions for SwiftUI views.</p>

<!-- <div class="ads">
    <span>
        Why don’t more iOS apps use voice? Machine learning for voice is hard, and using Siri is clunky and rigid. So we open-sourced an iOS library (also Android, Node, Python, & React Native), and built a no-code web tool to make custom wake words, speech recognizers, and AI voices—for all devs! <a href="https://www.spokestack.io/?utm_source=swiftui_weekly&utm_medium=email&utm_campaign=maker_launch_PAID">Try it for free.</a>
    </span>
</div> -->

<h4 id="adjustable-action">Adjustable action</h4>
<p>SwiftUI provides us an adjustable trait that VoiceOver uses to indicate the ability to adjust the view using swipes up or down. Assume that you are working on the <em>RatingView</em>. <em>RatingView</em> has to present the current 5-star rating and should provide the opportunity to change the rating. Let’s see how we can implement this view.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">RatingView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@Binding</span> <span class="k">var</span> <span class="nv">rating</span><span class="p">:</span> <span class="kt">Int</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">HStack</span> <span class="p">{</span>
            <span class="kt">ForEach</span><span class="p">(</span><span class="mi">1</span><span class="o">..&lt;</span><span class="mi">6</span><span class="p">)</span> <span class="p">{</span> <span class="n">index</span> <span class="k">in</span>
                <span class="kt">Button</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="p">{</span> <span class="n">rating</span> <span class="o">=</span> <span class="n">index</span> <span class="p">})</span> <span class="p">{</span>
                    <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="n">index</span> <span class="o">&lt;=</span> <span class="n">rating</span> <span class="p">?</span> <span class="s">"star.fill"</span> <span class="p">:</span> <span class="s">"star"</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>As you can see in the example above, the implementation of the <em>RatingView</em> is pretty straightforward. The <em>RatingView</em> changes the value of rating using binding whenever you press the particular button. But what about accessibility? How does VoiceOver work with the <em>RatingView</em>?</p>

<blockquote>
  <p>To learn about the basics of accessibility in SwiftUI, take a look at my <a href="/2019/09/10/accessibility-in-swiftui/">“Accessibility in SwiftUI”</a> post.</p>
</blockquote>

<p>Buttons are accessible out of the box, and VoiceOver will focus on the first button and pronounce the message: “star fill”. This is the default behavior, and it doesn’t make sense in this case. Fortunately, SwiftUI provides us a few modifiers to customize the user experience here.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">RatingView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@Binding</span> <span class="k">var</span> <span class="nv">rating</span><span class="p">:</span> <span class="kt">Int</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">HStack</span> <span class="p">{</span>
            <span class="kt">ForEach</span><span class="p">(</span><span class="mi">1</span><span class="o">..&lt;</span><span class="mi">6</span><span class="p">)</span> <span class="p">{</span> <span class="n">index</span> <span class="k">in</span>
                <span class="kt">Button</span><span class="p">(</span><span class="nv">action</span><span class="p">:</span> <span class="p">{</span> <span class="n">rating</span> <span class="o">=</span> <span class="n">index</span> <span class="p">})</span> <span class="p">{</span>
                    <span class="kt">Image</span><span class="p">(</span><span class="nv">systemName</span><span class="p">:</span> <span class="n">index</span> <span class="o">&lt;=</span> <span class="n">rating</span> <span class="p">?</span> <span class="s">"star.fill"</span> <span class="p">:</span> <span class="s">"star"</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">accessibilityElement</span><span class="p">()</span>
        <span class="o">.</span><span class="nf">accessibilityLabel</span><span class="p">(</span><span class="kt">Text</span><span class="p">(</span><span class="s">"rating"</span><span class="p">))</span>
        <span class="o">.</span><span class="nf">accessibilityValue</span><span class="p">(</span><span class="kt">Text</span><span class="p">(</span><span class="kt">String</span><span class="p">(</span><span class="n">rating</span><span class="p">)))</span>
        <span class="o">.</span><span class="n">accessibilityAdjustableAction</span> <span class="p">{</span> <span class="n">direction</span> <span class="k">in</span>
            <span class="k">switch</span> <span class="n">direction</span> <span class="p">{</span>
            <span class="k">case</span> <span class="o">.</span><span class="nv">increment</span><span class="p">:</span>
                <span class="k">guard</span> <span class="n">rating</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="k">else</span> <span class="p">{</span> <span class="k">break</span> <span class="p">}</span>
                <span class="n">rating</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">case</span> <span class="o">.</span><span class="nv">decrement</span><span class="p">:</span>
                <span class="k">guard</span> <span class="n">rating</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="p">{</span> <span class="k">break</span> <span class="p">}</span>
                <span class="n">rating</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="kd">@unknown</span> <span class="k">default</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>By default, the <em>HStack</em> works as a transparent accessibility container for its children and exposes children’s information. We prevent the default behavior using <em>accessibilityElement</em> modifier that enables accessibility for <em>HStack</em> and ignores the children. We also provide the accessibility label and value.</p>

<p>We use the <em>accessibilityAdjustableAction</em> modifier, which automatically adds the adjustable trait. We also have to provide a closure that handles the action. The only parameter of the closure is the instance of the <em>AccessibilityAdjustmentDirection</em> enum.</p>

<p>Whenever the user navigates to the <em>RatingView</em>, VoiceOver focuses on the <em>HStack</em> itself and pronounces the message: “rating, 3. Adjustable”. Users can use swipe up and down gestures to change the value of the rating.</p>

<blockquote>
  <p>To learn about the adjustable views in UIKit, take a look at my <a href="/2018/07/09/make-your-app-accessible-for-everyone/">“Make your app accessible for everyone”</a> post.</p>
</blockquote>

<h4 id="additional-actions">Additional actions</h4>
<p>VoiceOver supports additional actions which we can handle in our views. For example, there is a two-finger double-tap action called magic tap. Apple suggests us to use the magic tap for the main action in our view.</p>

<p>There is two-finger scrub (move two fingers back and forth three times quickly, making a “z”) action that users do to go back in the navigation or dismiss the alert. You can handle this action in your view if it utilizes the custom navigation behavior.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">PlayerView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">viewModel</span><span class="p">:</span> <span class="kt">ViewModel</span>
    <span class="kd">@Environment</span><span class="p">(\</span><span class="o">.</span><span class="n">presentationMode</span><span class="p">)</span> <span class="k">var</span> <span class="nv">presentation</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">HStack</span> <span class="p">{</span>
            <span class="c1">// Player content</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">accessibilityAction</span><span class="p">(</span><span class="o">.</span><span class="n">magicTap</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="n">viewModel</span><span class="o">.</span><span class="n">isPlaying</span> <span class="p">{</span>
                <span class="n">viewModel</span><span class="o">.</span><span class="nf">pause</span><span class="p">()</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">viewModel</span><span class="o">.</span><span class="nf">play</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">accessibilityAction</span><span class="p">(</span><span class="o">.</span><span class="n">escape</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">viewModel</span><span class="o">.</span><span class="nf">pause</span><span class="p">()</span>
            <span class="n">presentation</span><span class="o">.</span><span class="n">wrappedValue</span><span class="o">.</span><span class="nf">dismiss</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You can also provide named actions in addition to the predefined actions.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">PlayerView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@ObservedObject</span> <span class="k">var</span> <span class="nv">viewModel</span><span class="p">:</span> <span class="kt">ViewModel</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">HStack</span> <span class="p">{</span>
            <span class="c1">// Player content</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">accessibilityAction</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="kt">Text</span><span class="p">(</span><span class="s">"skip"</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">viewModel</span><span class="o">.</span><span class="nf">skip</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">accessibilityAction</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="kt">Text</span><span class="p">(</span><span class="s">"repeat"</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">viewModel</span><span class="o">.</span><span class="nf">repeat</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="conclusion">Conclusion</h4>
<p>This week we learned how to make our apps more accessible by adding VoiceOver-friendly actions. Remember that accessibility isn’t a feature or a “nice to have”. It’s a necessity. So let’s make your app accessible for everyone. I hope you enjoy the post. Feel free to follow me on <a href="https://twitter.com/mecid">Twitter</a> and ask your questions related to this post. Thanks for reading, and see you next week!</p>

</article>


<aside class="related">
  <h4>Recent posts</h4>
  <ul class="related-posts">
    
      <li>
        <a title="Custom accessibility content in SwiftUI" href="/2021/10/06/custom-accessibility-content-in-swiftui/">
          Custom accessibility content in SwiftUI
          <small><time datetime="2021-10-06T00:00:00+08:00">06 Oct 2021</time></small>
        </a>
      </li>
    
      <li>
        <a title="Audio graphs in SwiftUI" href="/2021/09/29/audio-graphs-in-swiftui/">
          Audio graphs in SwiftUI
          <small><time datetime="2021-09-29T00:00:00+08:00">29 Sep 2021</time></small>
        </a>
      </li>
    
      <li>
        <a title="Accessibility focus in SwiftUI" href="/2021/09/23/accessibility-focus-in-swiftui/">
          Accessibility focus in SwiftUI
          <small><time datetime="2021-09-23T00:00:00+08:00">23 Sep 2021</time></small>
        </a>
      </li>
    
  </ul>
</aside>


      </main>

      <footer class="footer">
          <img class="avatar" alt="mecid" width="100" height="100" data-proofer-ignore="true" src="https://avatars2.githubusercontent.com/mecid?v=3&s=100" srcset="https://avatars2.githubusercontent.com/mecid?v=3&s=100 1x, https://avatars2.githubusercontent.com/mecid?v=3&s=200 2x, https://avatars2.githubusercontent.com/mecid?v=3&s=300 3x, https://avatars2.githubusercontent.com/mecid?v=3&s=400 4x" />
          <small>Hi there! I am code4you,I like to program, and do some App.</small>
          <small>I'm a developer</small>
          <small>Feel free to follow me on <a href="https://github.com/code4you2021">Github</a>.</small>
        <small>
          &copy; <time datetime="2021-10-17T11:25:11+08:00">2021</time>. All rights reserved.
        </small>
      </footer>
    </div>

    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1WQVZK1CR7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-18491817-18');
    </script>
    
  </body>
</html>
