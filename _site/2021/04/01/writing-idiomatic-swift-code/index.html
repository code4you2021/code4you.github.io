<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="swift ios development apple watch iphone ipad swiftui macos uikit dev wwdc tutorial guide redux tea state container" />

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Writing idiomatic Swift code | Code4You</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Writing idiomatic Swift code" />
<meta name="author" content="Code4You" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Today is a great day to start learning iOS development. iOS development evolves every year and brings us new things to learn. This post should be valuable for the people who move to Swift from another programming language. This week we will talk about Swift idioms and how to write idiomatic Swift code." />
<meta property="og:description" content="Today is a great day to start learning iOS development. iOS development evolves every year and brings us new things to learn. This post should be valuable for the people who move to Swift from another programming language. This week we will talk about Swift idioms and how to write idiomatic Swift code." />
<link rel="canonical" href="http://localhost:4000/2021/04/01/writing-idiomatic-swift-code/" />
<meta property="og:url" content="http://localhost:4000/2021/04/01/writing-idiomatic-swift-code/" />
<meta property="og:site_name" content="Code4You" />
<meta property="og:image" content="http://localhost:4000/public/swift.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-04-01T00:00:00+08:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://localhost:4000/public/swift.png" />
<meta property="twitter:title" content="Writing idiomatic Swift code" />
<script type="application/ld+json">
{"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2021/04/01/writing-idiomatic-swift-code/"},"url":"http://localhost:4000/2021/04/01/writing-idiomatic-swift-code/","image":"http://localhost:4000/public/swift.png","author":{"@type":"Person","name":"Code4You"},"headline":"Writing idiomatic Swift code","description":"Today is a great day to start learning iOS development. iOS development evolves every year and brings us new things to learn. This post should be valuable for the people who move to Swift from another programming language. This week we will talk about Swift idioms and how to write idiomatic Swift code.","dateModified":"2021-04-01T00:00:00+08:00","datePublished":"2021-04-01T00:00:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <link rel="stylesheet" href="/styles.css">
  <link rel="shortcut icon" href="/public/favicon.ico">
  <link rel="alternate" type="application/atom+xml" title="Code4You" href="/feed.xml">
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <nav>
          <h1 class="masthead-title">
            <a href="/" title="Home">Code4You</a>
          </h1>
          <div>
            <a href="/categories" title="Categories">Categories</a>
            <a href="/archive" title="Archive">Archive</a>
            <a href="/feed.xml" title="Feed">Feed</a>
          </div>
        </nav>
      </header>

      <main>
        <article class="post">
  <h2 class="post-title">Writing idiomatic Swift code</h2>
  <time datetime="2021-04-01T00:00:00+08:00" class="post-date">01 Apr 2021</time>
  <p>Today is a great day to start learning iOS development. iOS development evolves every year and brings us new things to learn. This post should be valuable for the people who move to Swift from another programming language. This week we will talk about Swift idioms and how to write idiomatic Swift code.</p>

<!-- <div class="ads">
    <span>
        Why don’t more iOS apps use voice? Machine learning for voice is hard, and using Siri is clunky and rigid. So we open-sourced an iOS library (also Android, Node, Python, & React Native), and built a no-code web tool to make custom wake words, speech recognizers, and AI voices—for all devs! <a href="https://www.spokestack.io/?utm_source=swiftui_weekly&utm_medium=email&utm_campaign=maker_launch_PAID">Try it for free.</a>
    </span>
</div> -->

<p>Swift language encourages you to write safe, fast, and expressive code. It provides you all the needed programming language features to allow you to write safe and bug-free code.</p>

<h4 id="reference-and-value-types">Reference and Value types</h4>
<p>Swift language provides you reference and value types. Reference types are classes and closures. Classes are fundamental building blocks in Object-Oriented Programming. Value types are structs and enums. The main difference between them is the lifecycle. Swift copies value for value types when you pass it around. On the other hand, Swift copies reference for reference types when you pass them.</p>

<p>What does it mean for us? Classes allow us to share mutable states by sharing a reference to the data. For example, if you need to have a piece of data shared between different components and every component should have an opportunity to mutate the shared state, class is a way to go. For all other cases, value types are what you need.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="kt">SharedState</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">a</span><span class="p">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="kd">func</span> <span class="nf">increment</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">a</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">foo</span><span class="p">(</span><span class="nv">reference</span><span class="p">:</span> <span class="kt">SharedState</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">reference</span><span class="o">.</span><span class="nf">increment</span><span class="p">()</span>
<span class="p">}</span>

<span class="k">var</span> <span class="nv">reference</span> <span class="o">=</span> <span class="kt">SharedState</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="n">reference</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
<span class="nf">foo</span><span class="p">(</span><span class="nv">reference</span><span class="p">:</span> <span class="n">reference</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">reference</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
</code></pre></div></div>

<p>Here we have a class called <em>SharedState</em>, and we pass it inside a function and mutate it, then we print it outside the function. We model <em>SharedState</em> as a class because we need a shared state that we can mutate. We can’t do the same with structs because value types encourage immutability.</p>

<h4 id="enums">Enums</h4>
<p>Enum is a great way to model an exclusive piece of state. I love enums, and it is one of my favorite Swift language features that allow us to build a very type-safe code. Let’s take a look at the example that defines possible sorting options in my app.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">enum</span> <span class="kt">Sorting</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">price</span>
    <span class="k">case</span> <span class="n">reviews</span>
    <span class="k">case</span> <span class="n">date</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">sorting</span><span class="p">:</span> <span class="kt">Sorting</span> <span class="o">=</span> <span class="o">.</span><span class="n">price</span>

<span class="k">switch</span> <span class="n">sorting</span> <span class="p">{</span>
<span class="k">case</span> <span class="o">.</span><span class="nv">price</span><span class="p">:</span> <span class="nf">print</span><span class="p">(</span><span class="s">"price"</span><span class="p">)</span>
<span class="k">case</span> <span class="o">.</span><span class="nv">date</span><span class="p">:</span> <span class="nf">print</span><span class="p">(</span><span class="s">"date"</span><span class="p">)</span>
<span class="k">case</span> <span class="o">.</span><span class="nv">reviews</span><span class="p">:</span> <span class="nf">print</span><span class="p">(</span><span class="s">"reviews"</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">if</span> <span class="n">sorting</span> <span class="o">==</span> <span class="o">.</span><span class="n">date</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"date"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Enums are great and even more powerful with associated values for particular cases.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">enum</span> <span class="kt">Action</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">updateTimeline</span>
    <span class="k">case</span> <span class="nf">sharePost</span><span class="p">(</span><span class="kt">String</span><span class="p">)</span>
    <span class="k">case</span> <span class="nf">deletePost</span><span class="p">(</span><span class="kt">UUID</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">action</span><span class="p">:</span> <span class="kt">Action</span> <span class="o">=</span> <span class="o">.</span><span class="n">updateTimeline</span>

<span class="k">switch</span> <span class="n">action</span> <span class="p">{</span>
<span class="k">case</span> <span class="o">.</span><span class="nv">updateTimeline</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"update timeline..."</span><span class="p">)</span>
<span class="k">case</span> <span class="kd">let</span> <span class="o">.</span><span class="nf">deletePost</span><span class="p">(</span><span class="n">id</span><span class="p">):</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"deleting post: </span><span class="se">\(</span><span class="n">id</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="k">case</span> <span class="kd">let</span> <span class="o">.</span><span class="nf">sharePost</span><span class="p">(</span><span class="n">content</span><span class="p">):</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"sharing post with text: </span><span class="se">\(</span><span class="n">content</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Now we can use the <strong>switch</strong> with <strong>case let</strong> to extract the associated values for every case. But remember that we should use enums for mutually exclusive cases. You can always use structs with static fields for inclusive cases.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Bad</span>
<span class="kd">enum</span> <span class="kt">Regex</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">email</span>
    <span class="k">case</span> <span class="n">username</span>
    <span class="k">case</span> <span class="nf">other</span><span class="p">(</span><span class="kt">String</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Good</span>
<span class="kd">struct</span> <span class="kt">Regex</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">pattern</span><span class="p">:</span> <span class="kt">String</span>

    <span class="kd">static</span> <span class="k">let</span> <span class="nv">email</span> <span class="o">=</span> <span class="kt">Regex</span><span class="p">(</span><span class="nv">pattern</span><span class="p">:</span> <span class="s">"regex for email"</span><span class="p">)</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">username</span> <span class="o">=</span> <span class="kt">Regex</span><span class="p">(</span><span class="nv">pattern</span><span class="p">:</span> <span class="s">"regex for username"</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">other</span> <span class="o">=</span> <span class="kt">Regex</span><span class="p">(</span><span class="nv">pattern</span><span class="p">:</span> <span class="s">"another regex"</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="optionals">Optionals</h4>
<p>Another language feature that Swift provides us to write type-safe code is optionals. Swift types can’t be <em>nil</em> unless you define them as optional. In this case, the Swift compiler will require to handle all the usages where the value can be <em>nil</em>.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="nv">nonOptionalInteger</span><span class="p">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">3</span>
<span class="k">let</span> <span class="nv">optionalInteger</span><span class="p">:</span> <span class="kt">Int</span><span class="p">?</span> <span class="o">=</span> <span class="mi">3</span>

<span class="kd">func</span> <span class="nf">print</span><span class="p">(</span><span class="nv">integer</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">integer</span><span class="p">)</span>
<span class="p">}</span>

<span class="nf">print</span><span class="p">(</span><span class="nv">integer</span><span class="p">:</span> <span class="n">optionalInteger</span> <span class="p">??</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">if</span> <span class="k">let</span> <span class="nv">value</span> <span class="o">=</span> <span class="n">optionalInteger</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="nv">integer</span><span class="p">:</span> <span class="n">value</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Compiler error</span>
<span class="c1">// Value of optional type 'Int?' must be unwrapped to a value of type 'Int'</span>
<span class="nf">print</span><span class="p">(</span><span class="nv">integer</span><span class="p">:</span> <span class="n">optionalInteger</span><span class="p">)</span>
</code></pre></div></div>

<p>As you can see, we have to use <strong>?</strong> after the type name in case of optionals. We can use <strong>??</strong> operator to provide a default value whenever value is not available, or we can use <strong>if let</strong> expression to extract the optional value and use it inside the inner scope.</p>

<h4 id="conclusion">Conclusion</h4>
<p>Swift programming language evolves very fast. The core team is constantly considering the feedback that developers provide and add new features to the Swift language. To write more idiomatic code, you should also learn about pattern matching, protocols, generics, and functional programming in Swift. I hope you enjoy the post. Feel free to follow me on <a href="https://twitter.com/mecid">Twitter</a> and ask your questions related to this post. Thanks for reading, and see you next week!</p>

<ol>
  <li><a href="/2019/01/17/using-protocols-as-composable-extensions/">Using protocols as composable extensions</a></li>
  <li><a href="/2021/02/18/phantom-types-in-swift/">Phantom types in Swift</a></li>
  <li><a href="/2019/02/06/pattern-matching-with-case-let/">Pattern Matching with case let</a></li>
  <li><a href="/2020/01/08/building-networking-layer-using-functions/">Building networking layer using functions</a></li>
</ol>

</article>


<aside class="related">
  <h4>Recent posts</h4>
  <ul class="related-posts">
    
      <li>
        <a title="Custom accessibility content in SwiftUI" href="/2021/10/06/custom-accessibility-content-in-swiftui/">
          Custom accessibility content in SwiftUI
          <small><time datetime="2021-10-06T00:00:00+08:00">06 Oct 2021</time></small>
        </a>
      </li>
    
      <li>
        <a title="Audio graphs in SwiftUI" href="/2021/09/29/audio-graphs-in-swiftui/">
          Audio graphs in SwiftUI
          <small><time datetime="2021-09-29T00:00:00+08:00">29 Sep 2021</time></small>
        </a>
      </li>
    
      <li>
        <a title="Accessibility focus in SwiftUI" href="/2021/09/23/accessibility-focus-in-swiftui/">
          Accessibility focus in SwiftUI
          <small><time datetime="2021-09-23T00:00:00+08:00">23 Sep 2021</time></small>
        </a>
      </li>
    
  </ul>
</aside>


      </main>

      <footer class="footer">
          <img class="avatar" alt="mecid" width="100" height="100" data-proofer-ignore="true" src="https://avatars2.githubusercontent.com/mecid?v=3&s=100" srcset="https://avatars2.githubusercontent.com/mecid?v=3&s=100 1x, https://avatars2.githubusercontent.com/mecid?v=3&s=200 2x, https://avatars2.githubusercontent.com/mecid?v=3&s=300 3x, https://avatars2.githubusercontent.com/mecid?v=3&s=400 4x" />
          <small>Hi there! I am code4you,I like to program, and do some App.</small>
          <small>I'm a developer</small>
          <small>Feel free to follow me on <a href="https://github.com/code4you2021">Github</a>.</small>
        <small>
          &copy; <time datetime="2021-10-17T11:25:11+08:00">2021</time>. All rights reserved.
        </small>
      </footer>
    </div>

    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1WQVZK1CR7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-18491817-18');
    </script>
    
  </body>
</html>
