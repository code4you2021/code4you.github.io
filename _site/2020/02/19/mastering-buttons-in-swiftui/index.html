<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="swift ios development apple watch iphone ipad swiftui macos uikit dev wwdc tutorial guide redux tea state container" />

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Mastering buttons in SwiftUI | Code4You</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Mastering buttons in SwiftUI" />
<meta name="author" content="Code4You" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Button is one of the regularly used components in SwiftUI. We use buttons to allow users to produce actions. That’s why it is so essential to generalize the look and feel of buttons in our apps. This week we will master buttons in SwiftUI. We will learn how to customize the look and feel of our buttons." />
<meta property="og:description" content="Button is one of the regularly used components in SwiftUI. We use buttons to allow users to produce actions. That’s why it is so essential to generalize the look and feel of buttons in our apps. This week we will master buttons in SwiftUI. We will learn how to customize the look and feel of our buttons." />
<link rel="canonical" href="http://localhost:4000/2020/02/19/mastering-buttons-in-swiftui/" />
<meta property="og:url" content="http://localhost:4000/2020/02/19/mastering-buttons-in-swiftui/" />
<meta property="og:site_name" content="Code4You" />
<meta property="og:image" content="http://localhost:4000/public/buttons.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-02-19T00:00:00+08:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://localhost:4000/public/buttons.png" />
<meta property="twitter:title" content="Mastering buttons in SwiftUI" />
<script type="application/ld+json">
{"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2020/02/19/mastering-buttons-in-swiftui/"},"url":"http://localhost:4000/2020/02/19/mastering-buttons-in-swiftui/","image":"http://localhost:4000/public/buttons.png","author":{"@type":"Person","name":"Code4You"},"headline":"Mastering buttons in SwiftUI","description":"Button is one of the regularly used components in SwiftUI. We use buttons to allow users to produce actions. That’s why it is so essential to generalize the look and feel of buttons in our apps. This week we will master buttons in SwiftUI. We will learn how to customize the look and feel of our buttons.","dateModified":"2020-02-19T00:00:00+08:00","datePublished":"2020-02-19T00:00:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <link rel="stylesheet" href="/styles.css">
  <link rel="shortcut icon" href="/public/favicon.ico">
  <link rel="alternate" type="application/atom+xml" title="Code4You" href="/feed.xml">
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <nav>
          <h1 class="masthead-title">
            <a href="/" title="Home">Code4You</a>
          </h1>
          <div>
            <a href="/categories" title="Categories">Categories</a>
            <a href="/archive" title="Archive">Archive</a>
            <a href="/feed.xml" title="Feed">Feed</a>
          </div>
        </nav>
      </header>

      <main>
        <article class="post">
  <h2 class="post-title">Mastering buttons in SwiftUI</h2>
  <time datetime="2020-02-19T00:00:00+08:00" class="post-date">19 Feb 2020</time>
  <p><em>Button</em> is one of the regularly used components in SwiftUI. We use buttons to allow users to produce actions. That’s why it is so essential to generalize the look and feel of buttons in our apps. This week we will master buttons in SwiftUI. We will learn how to customize the look and feel of our buttons.</p>

<!-- <div class="ads">
    <span>
        Why don’t more iOS apps use voice? Machine learning for voice is hard, and using Siri is clunky and rigid. So we open-sourced an iOS library (also Android, Node, Python, & React Native), and built a no-code web tool to make custom wake words, speech recognizers, and AI voices—for all devs! <a href="https://www.spokestack.io/?utm_source=swiftui_weekly&utm_medium=email&utm_campaign=maker_launch_PAID">Try it for free.</a>
    </span>
</div> -->

<h4 id="basic-usage">Basic usage</h4>
<p>Let’s start by presenting a simple button that prints something in the console whenever the user presses it.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">RootView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">Button</span><span class="p">(</span><span class="s">"Button 1"</span><span class="p">)</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Button 1"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="/public/button.png" alt="button" /></p>

<p>Pretty easy, right? Now we can move forward, I want to style my buttons in Apple way. Buttons should be filled with the accent color of my app and have a corner radius. Let’s take a look at the quick implementation.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">Button</span><span class="p">(</span><span class="s">"Button 2"</span><span class="p">)</span> <span class="p">{}</span>
    <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">accentColor</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">cornerRadius</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="/public/button1.png" alt="button" /></p>

<p>Now my button looks like I need, but my app has a lot of actions represented by buttons, and I don’t want to copy-paste these styling code every time. We can solve the issue by introducing a new view.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">FilledButton</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">action</span><span class="p">:</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Void</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">Button</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="nv">action</span><span class="p">:</span> <span class="n">action</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="o">.</span><span class="n">white</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
            <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">accentColor</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">cornerRadius</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Now we can use <em>FilledButton</em> everywhere in the app. We create a new view that renders our button, but this approach has one downside. We can’t modify the label of our button. For example, we can’t change the text color while the user presses the button.</p>

<h4 id="buttonstyle-protocol">ButtonStyle protocol</h4>
<p>SwiftUI allows us to customize buttons in our apps without introducing new views or copy-pasting the styling code. SwiftUI provides the special <em>ButtonStyle</em> protocol. We can implement <em>FilledButton</em> struct that conforms to <em>ButtonStyle</em> instead of <em>View</em> protocol. Let’s see what benefits we have by using <em>ButtonStyle</em> protocol.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">FilledButton</span><span class="p">:</span> <span class="kt">ButtonStyle</span> <span class="p">{</span>
    <span class="kd">@Environment</span><span class="p">(\</span><span class="o">.</span><span class="n">isEnabled</span><span class="p">)</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">isEnabled</span>

    <span class="kd">func</span> <span class="nf">makeBody</span><span class="p">(</span><span class="nv">configuration</span><span class="p">:</span> <span class="kt">Configuration</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="n">configuration</span>
            <span class="o">.</span><span class="n">label</span>
            <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="n">configuration</span><span class="o">.</span><span class="n">isPressed</span> <span class="p">?</span> <span class="o">.</span><span class="nv">gray</span> <span class="p">:</span> <span class="o">.</span><span class="n">white</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
            <span class="o">.</span><span class="nf">background</span><span class="p">(</span><span class="n">isEnabled</span> <span class="p">?</span> <span class="kt">Color</span><span class="o">.</span><span class="nv">accentColor</span> <span class="p">:</span> <span class="o">.</span><span class="n">gray</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">cornerRadius</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>As you can see in the example above, <em>ButtonStyle</em> protocol has the only one requirement. We need to implement <em>makeBody</em> function. This function provides a configuration that we can use to obtain the label of the button and understand whenever it is pressed or not. I have to mention that we also have access to the environment inside the <em>FilledButton</em> type.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">Button</span><span class="p">(</span><span class="s">"Button 1"</span><span class="p">)</span> <span class="p">{}</span>
    <span class="o">.</span><span class="nf">buttonStyle</span><span class="p">(</span><span class="kt">FilledButton</span><span class="p">())</span>
</code></pre></div></div>

<h4 id="custom-behavior-with-button-styles">Custom behavior with button styles</h4>
<p>Button styles can change the button instance drastically. For example, we can make a button style that accepts a boolean value and shows an activity indicator depending on that value.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">ProgressButtonStyle</span><span class="p">:</span> <span class="kt">ButtonStyle</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">isLoading</span><span class="p">:</span> <span class="kt">Bool</span>

    <span class="kd">func</span> <span class="nf">makeBody</span><span class="p">(</span><span class="nv">configuration</span><span class="p">:</span> <span class="kt">Configuration</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="n">configuration</span><span class="o">.</span><span class="n">label</span>
            <span class="o">.</span><span class="nf">opacity</span><span class="p">(</span><span class="n">isLoading</span> <span class="p">?</span> <span class="mi">0</span> <span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
            <span class="o">.</span><span class="n">overlay</span> <span class="p">{</span>
                <span class="k">if</span> <span class="n">isLoading</span> <span class="p">{</span>
                    <span class="kt">ProgressView</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">ContentView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@State</span> <span class="kd">private</span> <span class="k">var</span> <span class="nv">isLoading</span> <span class="o">=</span> <span class="kc">true</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">Button</span><span class="p">(</span><span class="s">"Download"</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">isLoading</span><span class="o">.</span><span class="nf">toggle</span><span class="p">()</span>
        <span class="p">}</span><span class="o">.</span><span class="nf">buttonStyle</span><span class="p">(</span><span class="kt">ProgressButtonStyle</span><span class="p">(</span><span class="nv">isLoading</span><span class="p">:</span> <span class="n">isLoading</span><span class="p">))</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="button-styles-and-environment">Button styles and environment</h4>
<p>Another benefit of <em>ButtonStyle</em> protocol is the ability to set it in the environment. It means we don’t need to set a button style manually for every button. SwiftUI will automatically apply it whenever we configure it for the current environment. Let’s take a look at the small example.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>

<span class="kd">struct</span> <span class="kt">RootView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">HStack</span><span class="p">(</span><span class="nv">spacing</span><span class="p">:</span> <span class="mi">16</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Button</span><span class="p">(</span><span class="s">"Button 1"</span><span class="p">)</span> <span class="p">{}</span>

            <span class="kt">Button</span><span class="p">(</span><span class="s">"Button 2"</span><span class="p">)</span> <span class="p">{}</span>

            <span class="kt">Button</span><span class="p">(</span><span class="s">"Button 3"</span><span class="p">)</span> <span class="p">{}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">import</span> <span class="kt">PlaygroundSupport</span>

<span class="k">let</span> <span class="nv">rootView</span> <span class="o">=</span> <span class="kt">RootView</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">accentColor</span><span class="p">(</span><span class="o">.</span><span class="n">orange</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">buttonStyle</span><span class="p">(</span><span class="kt">FilledButton</span><span class="p">())</span>
<span class="kt">PlaygroundPage</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="nf">setLiveView</span><span class="p">(</span><span class="n">rootView</span><span class="p">)</span>
</code></pre></div></div>

<p>After setting a button style in the environment, we don’t need to configure our buttons again. SwiftUI will apply that styling options by default. I want to mention that you can easily override any button or environment style by directly calling the <em>buttonStyle</em> modifier again.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">OutlineButton</span><span class="p">:</span> <span class="kt">ButtonStyle</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">makeBody</span><span class="p">(</span><span class="nv">configuration</span><span class="p">:</span> <span class="kt">Configuration</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="n">configuration</span>
            <span class="o">.</span><span class="n">label</span>
            <span class="o">.</span><span class="nf">foregroundColor</span><span class="p">(</span><span class="n">configuration</span><span class="o">.</span><span class="n">isPressed</span> <span class="p">?</span> <span class="o">.</span><span class="nv">gray</span> <span class="p">:</span> <span class="o">.</span><span class="n">accentColor</span><span class="p">)</span>
            <span class="o">.</span><span class="nf">padding</span><span class="p">()</span>
            <span class="o">.</span><span class="nf">background</span><span class="p">(</span>
                <span class="kt">RoundedRectangle</span><span class="p">(</span>
                    <span class="nv">cornerRadius</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
                    <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="n">continuous</span>
                <span class="p">)</span><span class="o">.</span><span class="nf">stroke</span><span class="p">(</span><span class="kt">Color</span><span class="o">.</span><span class="n">accentColor</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="kt">RootView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">HStack</span><span class="p">(</span><span class="nv">spacing</span><span class="p">:</span> <span class="mi">16</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Button</span><span class="p">(</span><span class="s">"Button 1"</span><span class="p">)</span> <span class="p">{}</span>

            <span class="kt">Button</span><span class="p">(</span><span class="s">"Button 2"</span><span class="p">)</span> <span class="p">{}</span>
                <span class="o">.</span><span class="nf">buttonStyle</span><span class="p">(</span><span class="kt">OutlineButton</span><span class="p">())</span>

            <span class="kt">Button</span><span class="p">(</span><span class="s">"Button 3"</span><span class="p">)</span> <span class="p">{}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">import</span> <span class="kt">PlaygroundSupport</span>

<span class="k">let</span> <span class="nv">rootView</span> <span class="o">=</span> <span class="kt">RootView</span><span class="p">()</span>
    <span class="o">.</span><span class="nf">accentColor</span><span class="p">(</span><span class="o">.</span><span class="n">orange</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">buttonStyle</span><span class="p">(</span><span class="kt">FilledButton</span><span class="p">())</span>
<span class="kt">PlaygroundPage</span><span class="o">.</span><span class="n">current</span><span class="o">.</span><span class="nf">setLiveView</span><span class="p">(</span><span class="n">rootView</span><span class="p">)</span>
</code></pre></div></div>

<blockquote>
  <p>SwiftUI uses environment to pass system-wide and application-related information. You can also populate environment with your custom objects. To learn more about environment, take a look at my <a href="/2019/08/21/the-power-of-environment-in-swiftui/">“The power of Environment in SwiftUI”</a> post.</p>
</blockquote>

<h4 id="primitivebuttonstyle-protocol">PrimitiveButtonStyle protocol</h4>
<p>Sometimes we need to implement super custom buttons. For example, assume that we need a button that acts only after a long press. We can’t achieve that with <em>ButtonStyle</em> protocol because it doesn’t provide us control on triggering the button action. Instead, SwiftUI gives us <em>PrimitiveButtonStyle</em> protocol that looks very similar to <em>ButtonStyle</em> but provides all the needed API to build a super custom button. Let’s build our button that acts after a long press.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">LongPressButton</span><span class="p">:</span> <span class="kt">PrimitiveButtonStyle</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">makeBody</span><span class="p">(</span><span class="nv">configuration</span><span class="p">:</span> <span class="kt">Configuration</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="n">configuration</span>
            <span class="o">.</span><span class="n">label</span>
            <span class="o">.</span><span class="nf">gesture</span><span class="p">(</span>
                <span class="kt">LongPressGesture</span><span class="p">()</span>
                    <span class="o">.</span><span class="n">onEnded</span> <span class="p">{</span> <span class="n">_</span> <span class="k">in</span> <span class="n">configuration</span><span class="o">.</span><span class="nf">trigger</span><span class="p">()</span> <span class="p">}</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>As you can see in the example above, <em>PrimitiveButtonStyle</em> looks very similar to our good friend <em>ButtonStyle</em>, but instead of <em>isPressed</em> property <em>configuration</em> provides us a <em>trigger</em> closure that represents the action of the button. We can trigger the button using that closure whenever we want. We can apply our <em>PrimitiveButtonStyle</em> in the same way by using the <em>buttonStyle</em> modifier.</p>

<p><img src="/public/buttons.png" alt="buttons" /></p>

<h4 id="conclusion">Conclusion</h4>
<p>This week we learned a few ways of customizing buttons in our apps. I am delighted with this protocol based styling approach in SwiftUI and love it. I hope you enjoy the post. Feel free to follow me on <a href="https://twitter.com/mecid">Twitter</a> and ask your questions related to this post. Thanks for reading, and see you next week!</p>

</article>


<aside class="related">
  <h4>Recent posts</h4>
  <ul class="related-posts">
    
      <li>
        <a title="Custom accessibility content in SwiftUI" href="/2021/10/06/custom-accessibility-content-in-swiftui/">
          Custom accessibility content in SwiftUI
          <small><time datetime="2021-10-06T00:00:00+08:00">06 Oct 2021</time></small>
        </a>
      </li>
    
      <li>
        <a title="Audio graphs in SwiftUI" href="/2021/09/29/audio-graphs-in-swiftui/">
          Audio graphs in SwiftUI
          <small><time datetime="2021-09-29T00:00:00+08:00">29 Sep 2021</time></small>
        </a>
      </li>
    
      <li>
        <a title="Accessibility focus in SwiftUI" href="/2021/09/23/accessibility-focus-in-swiftui/">
          Accessibility focus in SwiftUI
          <small><time datetime="2021-09-23T00:00:00+08:00">23 Sep 2021</time></small>
        </a>
      </li>
    
  </ul>
</aside>


      </main>

      <footer class="footer">
          <img class="avatar" alt="mecid" width="100" height="100" data-proofer-ignore="true" src="https://avatars2.githubusercontent.com/mecid?v=3&s=100" srcset="https://avatars2.githubusercontent.com/mecid?v=3&s=100 1x, https://avatars2.githubusercontent.com/mecid?v=3&s=200 2x, https://avatars2.githubusercontent.com/mecid?v=3&s=300 3x, https://avatars2.githubusercontent.com/mecid?v=3&s=400 4x" />
          <small>Hi there! I am code4you,I like to program, and do some App.</small>
          <small>I'm a developer</small>
          <small>Feel free to follow me on <a href="https://github.com/code4you2021">Github</a>.</small>
        <small>
          &copy; <time datetime="2021-10-17T11:25:11+08:00">2021</time>. All rights reserved.
        </small>
      </footer>
    </div>

    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1WQVZK1CR7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-18491817-18');
    </script>
    
  </body>
</html>
