<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="swift ios development apple watch iphone ipad swiftui macos uikit dev wwdc tutorial guide redux tea state container" />

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Mastering toolbars in SwiftUI | Code4You</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Mastering toolbars in SwiftUI" />
<meta name="author" content="Code4You" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Toolbar API is another excellent addition to SwiftUI this year. Usually, we use toolbars to provide available actions. Did you remember the case where you have a button outside of the navigation bar or bottom bar? This week we will learn all about the new Toolbar API." />
<meta property="og:description" content="Toolbar API is another excellent addition to SwiftUI this year. Usually, we use toolbars to provide available actions. Did you remember the case where you have a button outside of the navigation bar or bottom bar? This week we will learn all about the new Toolbar API." />
<link rel="canonical" href="http://localhost:4000/2020/07/15/mastering-toolbars-in-swiftui/" />
<meta property="og:url" content="http://localhost:4000/2020/07/15/mastering-toolbars-in-swiftui/" />
<meta property="og:site_name" content="Code4You" />
<meta property="og:image" content="http://localhost:4000/public/watchOS.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-07-15T00:00:00+08:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://localhost:4000/public/watchOS.png" />
<meta property="twitter:title" content="Mastering toolbars in SwiftUI" />
<script type="application/ld+json">
{"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2020/07/15/mastering-toolbars-in-swiftui/"},"url":"http://localhost:4000/2020/07/15/mastering-toolbars-in-swiftui/","image":"http://localhost:4000/public/watchOS.png","author":{"@type":"Person","name":"Code4You"},"headline":"Mastering toolbars in SwiftUI","description":"Toolbar API is another excellent addition to SwiftUI this year. Usually, we use toolbars to provide available actions. Did you remember the case where you have a button outside of the navigation bar or bottom bar? This week we will learn all about the new Toolbar API.","dateModified":"2020-07-15T00:00:00+08:00","datePublished":"2020-07-15T00:00:00+08:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <link rel="stylesheet" href="/styles.css">
  <link rel="shortcut icon" href="/public/favicon.ico">
  <link rel="alternate" type="application/atom+xml" title="Code4You" href="/feed.xml">
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <nav>
          <h1 class="masthead-title">
            <a href="/" title="Home">Code4You</a>
          </h1>
          <div>
            <a href="/categories" title="Categories">Categories</a>
            <a href="/archive" title="Archive">Archive</a>
            <a href="/feed.xml" title="Feed">Feed</a>
          </div>
        </nav>
      </header>

      <main>
        <article class="post">
  <h2 class="post-title">Mastering toolbars in SwiftUI</h2>
  <time datetime="2020-07-15T00:00:00+08:00" class="post-date">15 Jul 2020</time>
  <p>Toolbar API is another excellent addition to SwiftUI this year. Usually, we use toolbars to provide available actions. Did you remember the case where you have a button outside of the navigation bar or bottom bar? This week we will learn all about the new Toolbar API.</p>

<!-- <div class="ads">
    <span>
        Why don’t more iOS apps use voice? Machine learning for voice is hard, and using Siri is clunky and rigid. So we open-sourced an iOS library (also Android, Node, Python, & React Native), and built a no-code web tool to make custom wake words, speech recognizers, and AI voices—for all devs! <a href="https://www.spokestack.io/?utm_source=swiftui_weekly&utm_medium=email&utm_campaign=maker_launch_PAID">Try it for free.</a>
    </span>
</div> -->

<p>In the previous version of SwiftUI, we could place buttons in the navigation bar by using <em>navigationBarItems</em> modifier. Let’s take a quick look at how it works.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>

<span class="kd">struct</span> <span class="kt">ContentView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">messages</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">]</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">List</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="n">message</span> <span class="k">in</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">navigationTitle</span><span class="p">(</span><span class="s">"Messages"</span><span class="p">)</span>
        <span class="o">.</span><span class="nf">navigationBarItems</span><span class="p">(</span><span class="nv">trailing</span><span class="p">:</span> <span class="kt">EditButton</span><span class="p">())</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The example above looks good, but there is one big issue. It works only with the navigation bar. For instance, watchOS apps use <em>NavigationView</em> to provide a navigation stack, but there is no navigation bar to deliver actions. We have to use 3D touch menus on the watchOS, but then we face another problem. SwitUI doesn’t provide us API to use 3D touch menus.</p>

<p>Fortunately, Apple released the unified Toolbar API that works on all Apple platforms. Toolbar API is another example of a declarative API that adapts to the environment and looks different on different devices. For example, it uses a navigation bar on iOS, but on watchOS, it inserts a button into the top of the screen. Let’s take a look at how easily we can use it.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>

<span class="kd">struct</span> <span class="kt">ContentView</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">messages</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">]</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">View</span> <span class="p">{</span>
        <span class="kt">List</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="nv">id</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="n">message</span> <span class="k">in</span>
            <span class="kt">Text</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="o">.</span><span class="nf">navigationTitle</span><span class="p">(</span><span class="s">"Messages"</span><span class="p">)</span>
        <span class="o">.</span><span class="n">toolbar</span> <span class="p">{</span>
            <span class="kt">ToolbarItem</span><span class="p">(</span><span class="nv">placement</span><span class="p">:</span> <span class="o">.</span><span class="n">primaryAction</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">Button</span><span class="p">(</span><span class="s">"New"</span><span class="p">)</span> <span class="p">{}</span>
            <span class="p">}</span>

            <span class="kt">ToolbarItem</span><span class="p">(</span><span class="nv">placement</span><span class="p">:</span> <span class="o">.</span><span class="n">bottomBar</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">Button</span><span class="p">(</span><span class="s">"Filter"</span><span class="p">)</span> <span class="p">{}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>As you can see in the example above, SwiftUI provides us the <em>toolbar</em> modifier that we can use to build toolbar items. The <em>toolbar</em> modifier accepts the <em>ToolbarContentBuilder</em> closure, which is very similar to <em>ViewBuilder</em> function builder, but instead of views, it uses <em>ToolbarItems</em>.</p>

<h4 id="toolbaritem">ToolbarItem</h4>
<p>We use <em>ToolbarItem</em> struct to declare an action. <em>ToolbarItem</em> has two required parameters. The first one is placement, which is the instance of <em>ToolbarItemPlacement</em> struct. The second one is <em>ViewBuilder</em> closure that SwiftUI uses to build the view representation of your action.</p>

<p>SwiftUI hides all the magic of toolbars behind <em>ToolbarItemPlacement</em> struct. SwiftUI can put your toolbar item in different places, depending on the value of the placement parameter. There are multiple placement opportunities. Let’s talk about the essential options.</p>

<ol>
  <li><em>automatic</em> - The item is placed in the default section that varies depending on the current platform.</li>
  <li><em>primaryAction</em> - The item represents a primary action. Usually, SwiftUI places this item in the navigation bar on iOS or on top of other views on watchOS.</li>
</ol>

<p>There are placement options that we can use only in toolbars presented by a modal view.</p>
<ol>
  <li><em>confirmationAction</em> - The item represents a confirmation action for a modal interface. You can use it in your sheets to confirm saving action.</li>
  <li><em>cancellationAction</em> - The item represents a cancellation action for a modal interface.</li>
  <li><em>destructiveAction</em> - The item represents a destructive action for a modal interface. You can use it in your modal screens that delete some data.</li>
</ol>

<p>There are also a bunch of platform-specific placement options.</p>
<ol>
  <li><em>principal</em> - The item is placed in the main item section. For example, you can use it to customize the navigation bar’s title view on iOS.</li>
  <li><em>bottomBar</em> - The item is placed in the bottom toolbar. It is available only on iOS.</li>
  <li><em>keyboard</em> - The item is placed in the keyboard section. On iOS, keyboard items are above the software keyboard when present. On macOS, keyboard items will be placed inside the Touch Bar.</li>
  <li><em>navigationBarLeading</em> - The item is placed in the leading area of the navigation bar. It is available only on iOS and macOS.</li>
  <li><em>navigationBarTrailing</em> - The item is placed in the trailing area of the navigation bar. It is available only on iOS and macOS.</li>
</ol>

<p><img src="/public/watchOS.png" alt="watchOS-toolbar" /></p>

<h4 id="toolbarcontent">ToolbarContent</h4>
<p>We can also create a dedicated type defining our toolbar that we can reuse across the app. SwiftUI provides us the <em>ToolbarContent</em> protocol that allows us to create a struct representing a reusable toolbar. Let’s take a look at how we can use it.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>

<span class="kd">struct</span> <span class="kt">ItemsToolbar</span><span class="p">:</span> <span class="kt">ToolbarContent</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">add</span><span class="p">:</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Void</span>
    <span class="k">let</span> <span class="nv">sort</span><span class="p">:</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Void</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">ToolbarContent</span> <span class="p">{</span>
        <span class="kt">ToolbarItem</span><span class="p">(</span><span class="nv">placement</span><span class="p">:</span> <span class="o">.</span><span class="n">primaryAction</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Button</span><span class="p">(</span><span class="s">"Add"</span><span class="p">,</span> <span class="nv">action</span><span class="p">:</span> <span class="n">add</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="kt">ToolbarItem</span><span class="p">(</span><span class="nv">placement</span><span class="p">:</span> <span class="o">.</span><span class="n">bottomBar</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Button</span><span class="p">(</span><span class="s">"Sort"</span><span class="p">,</span> <span class="nv">action</span><span class="p">:</span> <span class="n">sort</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>As you can see in the example above, we create <em>ItemsToolbar</em> struct that conforms to <em>ToolbarContent</em> protocol. We customize it by providing closures for adding new items and sorting. Now we can reuse it across the app whenever we need to present a list of actions for an items list.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@main</span>
<span class="kd">struct</span> <span class="kt">MyApp</span><span class="p">:</span> <span class="kt">App</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">Scene</span> <span class="p">{</span>
        <span class="kt">WindowGroup</span> <span class="p">{</span>
            <span class="kt">NavigationView</span> <span class="p">{</span>
                <span class="kt">Text</span><span class="p">(</span><span class="s">"Hello World!"</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">toolbar</span> <span class="p">{</span>
                        <span class="kt">ItemsToolbar</span> <span class="p">{</span>
                            <span class="c1">// add new item here</span>
                        <span class="p">}</span> <span class="nv">sort</span><span class="p">:</span> <span class="p">{</span>
                            <span class="c1">// sort items</span>
                        <span class="p">}</span>

                    <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="toolbaritemgroup">ToolbarItemGroup</h4>
<p>Sometimes we might have several toolbar items in the same placement. Creating a <em>ToolbarItem</em> for every single button in the toolbar can be very repetitive. That’s why SwiftUI provides us another type called <em>ToolbarItemGroup</em>. <em>ToolbarItemGroup</em> allows us to fix toolbar items in the specific placement. Let’s take a look at a very quick example.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">SwiftUI</span>

<span class="kd">struct</span> <span class="kt">ItemsToolbar</span><span class="p">:</span> <span class="kt">ToolbarContent</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">add</span><span class="p">:</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Void</span>
    <span class="k">let</span> <span class="nv">sort</span><span class="p">:</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Void</span>
    <span class="k">let</span> <span class="nv">filter</span><span class="p">:</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Void</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kd">some</span> <span class="kt">ToolbarContent</span> <span class="p">{</span>
        <span class="kt">ToolbarItem</span><span class="p">(</span><span class="nv">placement</span><span class="p">:</span> <span class="o">.</span><span class="n">primaryAction</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Button</span><span class="p">(</span><span class="s">"Add"</span><span class="p">,</span> <span class="nv">action</span><span class="p">:</span> <span class="n">add</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="kt">ToolbarItemGroup</span><span class="p">(</span><span class="nv">placement</span><span class="p">:</span> <span class="o">.</span><span class="n">bottomBar</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Button</span><span class="p">(</span><span class="s">"Sort"</span><span class="p">,</span> <span class="nv">action</span><span class="p">:</span> <span class="n">sort</span><span class="p">)</span>
            <span class="kt">Button</span><span class="p">(</span><span class="s">"Filter"</span><span class="p">,</span> <span class="nv">action</span><span class="p">:</span> <span class="n">filter</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="conclusion">Conclusion</h4>
<p>Today we learned how to use the new Toolbar API to present actions in our apps in a unified way on different platforms. I hope you enjoy the post. Feel free to follow me on <a href="https://twitter.com/mecid">Twitter</a> and ask your questions related to this post. Thanks for reading, and see you next week!</p>

</article>


<aside class="related">
  <h4>Recent posts</h4>
  <ul class="related-posts">
    
      <li>
        <a title="Custom accessibility content in SwiftUI" href="/2021/10/06/custom-accessibility-content-in-swiftui/">
          Custom accessibility content in SwiftUI
          <small><time datetime="2021-10-06T00:00:00+08:00">06 Oct 2021</time></small>
        </a>
      </li>
    
      <li>
        <a title="Audio graphs in SwiftUI" href="/2021/09/29/audio-graphs-in-swiftui/">
          Audio graphs in SwiftUI
          <small><time datetime="2021-09-29T00:00:00+08:00">29 Sep 2021</time></small>
        </a>
      </li>
    
      <li>
        <a title="Accessibility focus in SwiftUI" href="/2021/09/23/accessibility-focus-in-swiftui/">
          Accessibility focus in SwiftUI
          <small><time datetime="2021-09-23T00:00:00+08:00">23 Sep 2021</time></small>
        </a>
      </li>
    
  </ul>
</aside>


      </main>

      <footer class="footer">
          <img class="avatar" alt="mecid" width="100" height="100" data-proofer-ignore="true" src="https://avatars2.githubusercontent.com/mecid?v=3&s=100" srcset="https://avatars2.githubusercontent.com/mecid?v=3&s=100 1x, https://avatars2.githubusercontent.com/mecid?v=3&s=200 2x, https://avatars2.githubusercontent.com/mecid?v=3&s=300 3x, https://avatars2.githubusercontent.com/mecid?v=3&s=400 4x" />
          <small>Hi there! I am code4you,I like to program, and do some App.</small>
          <small>I'm a developer</small>
          <small>Feel free to follow me on <a href="https://github.com/code4you2021">Github</a>.</small>
        <small>
          &copy; <time datetime="2021-10-17T11:25:11+08:00">2021</time>. All rights reserved.
        </small>
      </footer>
    </div>

    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1WQVZK1CR7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-18491817-18');
    </script>
    
  </body>
</html>
